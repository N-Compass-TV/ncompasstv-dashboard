<div id="tagsPage" class="theme-container">
	<div class="title-section">
        <div class="d-flex align-items-center">
            <div class="flex-even">
                <h1 class="page-title">{{ title }}</h1>
            </div>
			<div class="flex-even text-right">
				<button mat-button mat-raised-button class="theme-btn"
					(click)="onAddTag()">
					Add Tags
				</button>
			</div>
        </div>
    </div>

	<hr class="my-4">

	<!-- COUNT CARDS SECTION -->
	<div class="row cards">
		<div class="col-lg">
			<!-- DEALER COUNT -->
			<div *ngIf="!isLoadingCount; else loading;">
				<app-data-card-count 
					[data_value]="count.dealer" 
					[data_label]="'Dealers'">
				</app-data-card-count>
			</div>
		</div>
		<div class="col-lg">
			<!-- HOST COUNT -->
			<div *ngIf="!isLoadingCount; else loading;">
				<app-data-card-count 
					[data_value]="count.host" 
					[data_label]="'Hosts'">
				</app-data-card-count>
			</div>
		</div>
		<div class="col-lg">
			<!-- ADVERTISER COUNT -->
			<div *ngIf="!isLoadingCount; else loading;">
				<app-data-card-count 
					[data_value]="count.advertiser" 
					[data_label]="'Advertisers'">
				</app-data-card-count>
			</div>
		</div>
		<div class="col-lg">
			<!-- LICENSE COUNT -->
			<div *ngIf="!isLoadingCount; else loading;">
				<app-data-card-count 
					[data_value]="count.license" 
					[data_label]="'Licenses'">
				</app-data-card-count>
			</div>
		</div>
	</div>

	<hr class="my-4">

	<mat-tab-group dynamicHeight animationDuration="0ms">

		<!-- TAGS TAB -->
		<mat-tab label="Tags">
			<div class="row">
				<div class="col-lg">
					<ng-template matTabContent>
						<mat-card>
							<app-tags-table
								[isLoading]="isLoadingTags"
								[tableColumns]="tagsTableSettings.columns"
								[tableData]="tags"
								[currentTagType]="currentTagType"
								[currentUserRole]="currentUserRole">
							</app-tags-table>
						</mat-card>
					</ng-template>
				</div>
			</div>
		</mat-tab>

		<!-- TAG OWNERS TAB -->
		<mat-tab label="Owners">

			<ng-template matTabContent>
				<!-- DROPDOWN AND SEARCH BOX ROW -->
				<div class="dropdown-and-search-section d-flex justify-content-between">
	
					<!-- TAG TYPES DROPDOWN -->
					<div class="tag-types-select-container">
						<mat-form-field>
							<mat-label>Select Tag Type</mat-label>
							<mat-select (selectionChange)="onSelectTagType($event.value)" [(ngModel)]="currentTagType">
								<mat-option *ngFor="let type of tagTypes" [value]="type">
									{{ type.name }}
								</mat-option>
							</mat-select>
						</mat-form-field>
					</div>
	
					<!-- SEARCH FIELD -->
					<div class="search-container">
	
						<form [formGroup]="searchForm">
							<mat-form-field class="full-width" *ngIf="!isLoadingTags">
								<mat-label>Search Tags/Owners...</mat-label>
								<input matInput formControlName="tagFilter">
							</mat-form-field>
						</form>
	
					</div>
	
				</div>
	
				<!-- TAG-OWNERS TABLE -->
				<div class="row">
					<div class="col-lg">
						<mat-card>
							<app-tags-table
								[tableType]="'tag-owners'"
								[isLoading]="isLoadingTagOwners"
								[tableColumns]="tagOwnersTableSettings.columns"
								[tableData]="owners"
								[currentTagType]="currentTagType"
								[currentUserRole]="currentUserRole">
							</app-tags-table>
						</mat-card>
					</div>
				</div>
			</ng-template>

		</mat-tab>
	</mat-tab-group>
</div>

<ng-template #loading>
	<div class="py-4">
		<app-spinner [diameter]="60"></app-spinner>
	</div>
</ng-template>