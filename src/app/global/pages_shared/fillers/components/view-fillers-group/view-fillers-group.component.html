<div class="theme-container">
	<div class="content-section" *ngIf="filler_group_data">
		<div class="row no-gutters">
			<div class="col-lg-6">
				<h1 class="page-title">{{ filler_group_data.name }}</h1>
			</div>
			<div class="col-lg-6 text-right">
				<button
					mat-button
					mat-raised-button
					class="theme-btn pi-control _info sm-text mr-2"
					(click)="addFillerContent(filler_group_data)"
					title="Upload Filler">
					<span class="fas fa-upload"></span>
					<span class="ml-2 button_text_animation">Upload Filler</span>
				</button>
				<button
					mat-button
					mat-raised-button
					class="theme-btn pi-control _cool sm-text mr-2"
					(click)="createFillerFeed(filler_group_data, true)"
					title="Create Filler Feed"
					[disabled]="filler_group_contents.length == 0">
					<span class="fas fa-list-ol"></span>
					<span class="ml-2 button_text_animation">Create Filler Feed</span>
				</button>
			</div>
		</div>
		<hr class="my-4" />

		<div class="row mt-3 mb-2" *ngIf="filler_group_contents.length > 0">
			<div class="col-lg-8">
				<button mat-button mat-raised-button [matMenuTriggerFor]="orderSort" class="theme-btn mt-2" [disabled]="no_search_result">
					<span class="button-label">Order by Filename</span>
					<span class="fas fa-sort ml-2"></span>
				</button>
				<mat-menu #orderSort="matMenu">
					<button mat-menu-item (click)="sortFillerGroup('asc')">
						<i class="fa fa-sort-alpha-asc mr-3" aria-hidden="true"></i>Ascending
					</button>
					<button mat-menu-item (click)="sortFillerGroup('desc')">
						<i class="fa fa-sort-alpha-desc mr-3" aria-hidden="true"></i>Descending
					</button>
				</mat-menu>
			</div>
			<div class="col-lg-4">
				<app-search-field
					[form_title]="'Search Filename'"
					[placeholder]="'Example: Trivia.jpg'"
					[data_reference]=""
					[primary_keyword]="'name'"
					[secondary_keyword]="'name'"
					(searched)="onSearchFiller($event)"
					[api_search]="true">
				</app-search-field>
			</div>
		</div>
		<div class="row mb-3 no-gutters" *ngIf="sorting_order != ''">
			<div class="col-lg-12">
				<div class="p-2 bg-gray">
					<div class="row no-gutters">
						<div class="col-lg-11">
							<div class="filter-pills pt-1">
								<div class="filetype-pill pill">
									Ordered by Filename : <strong>{{ sorting_order == 'asc' ? 'Ascending' : 'Descending' }}</strong>
								</div>
							</div>
						</div>
						<div class="control col-lg-1 text-right">
							<button mat-button mat-raised-button class="theme-btn" (click)="clearFilter()">
								<span class="button-label"> Clear Filter </span>
								<span class="fas fa-times ml-2 sm-text"></span>
							</button>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div *ngIf="filler_group_contents.length > 0; else noContent">
			<div *ngIf="!no_search_result; else noResultsFound">
				<div class="row" *ngIf="!is_loading; else loader">
					<div class="col-lg-2" *ngFor="let data of filler_group_contents">
						<div class="box-shadowing mb-4">
							<div class="row no-gutters">
								<div class="col-lg-6 text-left bg-dark p-2">
									<span class="fa fa-image text-primary" *ngIf="data.fileType === 'image'" title="Image"></span>
									<span class="fa fa-video text-primary" *ngIf="data.fileType === 'video'" title="Video"></span>
									<span class="fa fa-wifi text-primary" *ngIf="data.fileType === 'feed'" title="Feed"></span>
								</div>
								<div class="col-lg-6 text-right bg-dark p-2">
									<span
										class="fas fa-times text-danger clickable"
										title="Delete Content"
										(click)="deleteContent(data.fillerContentId)"></span>
								</div>
							</div>
							<div class="row no-gutters">
								<div class="col-lg-12 bg-white">
									<img
										[src]="data.url"
										class="clickable full-width br-5 h-130-px"
										(click)="gotoFileURL(data.url)"
										*ngIf="data.fileType == 'image'; else video" />
									<ng-template #video>
										<div class="h-130-px">
											<object [attr.data]="data.url | sanitize" class="clickable full-width h-130-px br-5"></object>
										</div>
									</ng-template>
								</div>
							</div>
							<div class="row no-gutters">
								<div class="col-lg-12 bg-white p-2">
									<span
										(click)="gotoFileURL(data.url)"
										class="sm-text p-3 full-width clickable"
										title="{{ splitOriginalFilename(data.filename) }}"
										*ngIf="data.fileType != 'feed'; else videotitle">
										{{ splitOriginalFilename(data.filename) | slice : 0 : 27
										}}{{ splitOriginalFilename(data.filename).length > 27 ? '...' : '' }}</span
									>
									<ng-template #videotitle>
										<span class="sm-text p-3 full-width clickable" title="data.title" (click)="gotoFileURL(data.url)">
											{{ data.title | slice : 0 : 27 }}{{ data.title.length > 27 ? '...' : '' }}</span
										>
									</ng-template>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<ng-template #noContent>
	<div class="row">
		<div class="col-lg-12">
			<i class="md-text">There are no contents right now. Click on the Upload Filler button above if you wish to add one.</i>
		</div>
	</div>
</ng-template>
<ng-template #noResultsFound>
	<div class="row">
		<div class="col-lg-12">
			<div class="full-width bg-white pt-5 pb-5 col-lg-12 text-center">
				<div class="mb-4">
					<i class="text-gray fa-5x far fa-file-alt"></i>
				</div>
				<h3 class="text-gray col-lg-12">No Results Found.</h3>
				<span class="text-gray col-lg-12">Try adjusting your search to find what you're looking for.</span>
			</div>
		</div>
	</div>
</ng-template>

<ng-template #loader>
	<div class="py-4 h-500">
		<app-spinner [diameter]="60"></app-spinner>
	</div>
</ng-template>
