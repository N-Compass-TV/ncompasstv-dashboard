<div class="theme-container">
	<div class="popup" *ngIf="show_popup" [ngClass]="setPopupBackground()">{{ popup_message }} <span class="fas fa-times" (click)="dismissPopup()"></span></div>
    <div class="d-flex align-items-center mb-3 content-section">
        <div class="flex-even">

			<div class="alias-container">
				<h1 class="page-title mb-1" *ngIf="!enable_edit_alias else edit_alias">{{ title }}</h1>
				<mat-icon class="edit-alias" *ngIf="!enable_edit_alias" (click)="activateEdit(true)">edit</mat-icon>

				<ng-template #edit_alias>
					<form class="edit-alias-form" [formGroup]="update_alias">
						<h1 class="page-title mb-1"><input matInput formControlName="alias" placeholder="License Alias"></h1>
					</form>
					<mat-icon class="save-alias" *ngIf="enable_edit_alias" (click)="updateLicenseAlias()">save</mat-icon>
				</ng-template>
			</div>
			
            <p class="sm-text mb-0">{{ license_key }}</p>

			<div class="d-flex tags-container" *ngIf="tags.length > 0">
				<div *ngFor="let tag of tags" class="d-inline sm-text tag">{{ tag }}</div>
			</div>
            <!-- <p class="sm-text mb-0">Tags</p> -->
        </div>
        <div class="text-right">
			<button mat-button mat-raised-button class="theme-btn pi-control sm-text mr-2" [disabled]="status_check_disabled" (click)="checkPiStatus()" title="Check Status">
				<span class="fas fa-lightbulb"></span> <span class="ml-2 button_text_animation">Check Status</span>
			</button>

			<button mat-button mat-raised-button class="theme-btn pi-control sm-text mr-2 _info" [disabled]="!pi_status || pi_updating" (click)="pushUpdate()" title="Content Update">
				<span class="fas fa-upload"></span> <span class="ml-2 button_text_animation">Content Update</span>
			</button>

			<button mat-button mat-raised-button class="theme-btn pi-control sm-text _cool mr-2" [disabled]="!pi_status || pi_updating" title="Refetch Player Data" (click)="refetchPi()">
				<span class="fas fa-sync"></span> <span class="ml-2 button_text_animation">Refetch Content</span>
			</button>

			<button mat-button mat-raised-button class="theme-btn pi-control sm-text _primary mr-2" [disabled]="!pi_status || pi_updating" (click)="updateAndRestart()"  title="Update System">
				<span class="fas fa-terminal"></span> <span class="ml-2 button_text_animation">Update System</span>
			</button>

			<button mat-button mat-raised-button class="theme-btn pi-control sm-text _warning mr-2" [disabled]="!pi_status || pi_updating" (click)="restartPlayer()" title="Reboot Player">
				<span class="fas fa-power-off"></span> <span class="ml-2 button_text_animation">Reboot Player (Software)</span>
			</button>

			<button mat-button mat-raised-button class="theme-btn pi-control sm-text _caution mr-2" [disabled]="!pi_status || pi_updating" (click)="restartPi()" title="Reboot Pi">
				<span class="fas fa-power-off"></span> <span class="ml-2 button_text_animation">Reboot Pi (Device)</span>
			</button>

			<button mat-button mat-raised-button class="theme-btn pi-control sm-text _teal mr-2" [disabled]="!pi_status || pi_updating" (click)="resetPi()" title="Reset Player Data">
				<span class="fas fa-eraser"></span> <span class="ml-2 button_text_animation">Reset Data</span>
			</button>

			<button mat-button mat-raised-button class="theme-btn pi-control sm-text _dark mr-2" [disabled]="!pi_status || pi_updating" (click)="upgradeToV2()" title="Reset Player Data"  *ngIf="!apps">
				<span class="font-weight-bold">2.0</span> <span class="ml-2 button_text_animation">Upgrade to version 2</span>
			</button>

			<button mat-button mat-raised-button class="theme-btn pi-control sm-text _danger" (click)="onDeleteLicense()" title="Delete License" *ngIf="!pi_status">
				<span class="fas fa-trash"></span> <span class="ml-2 button_text_animation">Delete License</span>
			</button>
        </div>
    </div>
	
	<hr class="mb-0">
	
	<!-- TABS -->
    <div class="row mb-4 tabs">
        <div class="col-lg-12 min-height-500 custom-mat-tab mt-3">
            <mat-tab-group dynamicHeight (selectedTabChange)="tabSelected($event);">

				<!-- Details Tab -->
				<mat-tab label="Details">
					<div class="theme-container">
						<div *ngIf="!screen_loading else loading">
							<div class="details-tab-container">
								<div class="row mb-3">
									<!-- Screenshots -->
									<div class="col-lg-12 tab-card">
										<mat-card class="p-4 h-100">
											<!-- Screenshot Area -->
											<div class="row mb-3">
												<div class="col-lg-12">
													<div class="d-flex align-items-center">
														<div class="flex-even">
															<h5>Player Snapshots</h5>
															<p class="sm-text">Click Screenshot Button to get live screenshots of this license.</p>
														</div>
														<div class="text-right">
															<button mat-button mat-raised-button class="theme-btn mr-2" [disabled]="!pi_status || screenshot_timeout" (click)="screenShotPi()">
																<span class="fas fa-camera mr-2"></span>
																Screenshot
															</button>
															<button mat-button mat-raised-button class="theme-btn" *ngIf="screenshots.length != 0 && !is_dealer" [disabled]="screenshot_timeout || clear_screenshots" (click)="clearScreenshots()">Clear</button>
														</div>
													</div>
												</div>
											</div>

											<hr>

											<div class="horizontal-panel">
												<ng-container *ngIf="screenshots.length != 0; else no_screenshots">
													<div class="screenshots" *ngFor="let s of screenshots">
														<a [href]="s" target="_blank"><img [src]="s" alt="screenshots"></a>
														<p class="xsm-text text-center mb-0">{{ s | screenshot }}</p>
													</div>
												</ng-container>
									
												<ng-template #no_screenshots>
													<div class="p-5 text-center">
														<h5 class="text-muted mb-0">No Available Screenshots</h5>
													</div>
												</ng-template>
									
												<div class="loading-overlay d-flex align-items-center" *ngIf="screenshot_timeout">
													<div class="flex-even text-center">
														<h2 class="text-primary"><span class="fas fa-camera"></span></h2>
														<h6 class="text-primary">{{ screenshot_message }}</h6>
													</div>
												</div>
									
												<div class="loading-overlay d-flex align-items-center" *ngIf="clear_screenshots">
													<div class="flex-even text-center">
														<h2 class="text-primary"><span class="fas fa-camera"></span></h2>
														<h6 class="text-primary">Deleting Screenshots. . .</h6>
													</div>
												</div>
											</div>
										</mat-card>
									</div>
								</div>		

								<div class="d-flex">
									<div class="flex-even mr-3">
										<div>
											<!-- Pi and Player Status -->
											<div class="w-100 mb-3">
												<mat-card class="p-4">
													<h5 class="mb-0 font-weight-medium">
														Pi and Player Status
													</h5>
	
													<hr>
	
													<div class="flex">
														<!-- Pi Status -->
														<div class="flex-even">
															<span class="sm-text">
																Pi Status
															</span>
	
															<h5 [ngClass]="{ 'good' : pi_status, 'bad' : !pi_status }">
																{{ pi_status ? 'Online' : 'Offline' }}
															</h5>
														</div>
	
														<!-- Player Status -->
														<div class="flex-even">
															<span class="sm-text">
																Player Status
															</span>
	
															<h5 [ngClass]="{ 'good' : player_status, 'bad' : !player_status }">
																{{ player_status ? 'Online' : 'Offline' }}
															</h5>
														</div>
															
														<!-- Display Status -->
														<div class="flex-even" *ngIf="is_admin">
															<span class="sm-text">
																Display Status
															</span>
	
															<h5 *ngIf="display_status; else wait" [ngClass]="{ 'good' : display_status == 1, 'bad' : display_status == 2 }">
																{{ display_status == 1 ? 'ON' : 'OFF/UNKNOWN' }}
															</h5>

															<ng-template #wait>
																<h5 class="xsm-text text-gray">
																	Getting Display Status ...
																</h5>
															</ng-template>
														</div>

														<div class="flex-even" *ngIf="is_admin">
															<span class="sm-text">
																Display ON/OFF
															</span>

															<br>
	
															<mat-slide-toggle 
															(change)="monitorToggle($event)"
															[checked]="display_status == 1 ? 'checked' : 'false'">
															</mat-slide-toggle>
														</div>
													</div>
													
													<hr class="my-3">
	
													<div class="d-flex">
														<!-- Last Online -->
														<div class="flex-even last-online">
															<span class="sm-text">Last Online</span>
															<h5>{{ license_data.timeIn ? license_data.timeIn : 'N/A' }}</h5>
														</div>
	
														<!-- Last Offline -->
														<div class="flex-even last-offline">
															<span class="sm-text">Last Offline:</span>
															<h5>{{ license_data.timeOut ? license_data.timeOut : 'N/A' }}</h5>
														</div>
													</div>

													<hr class="my-3">
	
													<div class="d-flex">
														<!-- Last Update -->
														<div class="flex-even last-update">
															<span class="sm-text">Last Update</span>
															<h5>{{ content_time_update || 'N/A' }}</h5>
														</div>
	
														<!-- Anydesk -->
														<div class="flex-even">
															<span class="sm-text">Anydesk</span>
															<div>
																<h5 class="d-inline-block mr-3">{{ anydesk_id ? anydesk_id : 'N/A' }}</h5>

																<ng-container *ngIf="!anydesk_restarting; else disable_anydesk_btn">
																	<button class="card-button" *ngIf="anydesk_id" (click)="restartAnydesk()" title="Restart Anydesk Service">
																		<span class="fas fa-sync md-text"></span>
																	</button>
																</ng-container>

																<ng-template #disable_anydesk_btn>
																	<button class="card-button disabled rotate mr-2" title="Restarting Anydesk Service">
																		<span class="fas fa-sync md-text"></span>
																	</button>

																	<span class="sm-text text-gray">
																		Restarting Anydesk
																	</span>
																</ng-template>
															</div>
														</div>

                                                        <div class="flex-even last-update">
															<span class="sm-text">Anydesk Password</span>
															<h5>{{ splitKey(license_id) }}</h5>
														</div>
													</div>
												</mat-card>
											</div>

											<!-- Dealer and Host Info -->
											<div class="w-100 mb-3">
												<mat-card class="p-4">
													<h5 class="mb-0 font-weight-medium">
														Dealer and Host Info
													</h5>
	
													<hr>
	
													<!-- Host Name -->
													<div class="d-flex">
														<div class="flex-even hostname">
															<span class="sm-text">
																Dealer
															</span>
															<h5 class="mb-0">
																<a [routerLink]="dealer_route">{{ screen.assigned_dealer }}</a>
															</h5>
														</div>
	
														<div class="flex-even hostname">
															<span class="sm-text">
																Hostname
															</span>
															<h5 class="mb-0">
																<a [routerLink]="host_route">{{ host.name }}</a>
															</h5>
														</div>
													</div>
													
													<hr class="my-3">
	
													<div class="d-flex">
														<!-- Timezone -->
														<div class="flex-even timezone">
															<span class="sm-text">
																Timezone
															</span>
															<h5>
																{{ timezone.name }}
															</h5>
														</div>
	
														<!-- Business Hours -->
														<div class="flex-even business-hours">
															<span class="sm-text">Business Hours:</span>
															<h5 (click)="onShowHours()" class="hoverable">
																{{ current_operation.day }}: {{ current_operation.period }}
															</h5>
														</div>
													</div>

													<hr class="my-3">
	
													<!-- Notes -->
													<div class="notes">
														<span class="sm-text">Host Notes: </span>
														<p (click)="onShowNotes()" class="sm-text hoverable">{{ host_notes ? (host_notes | substring:100) : 'No notes available'}}</p>
													</div>
												</mat-card>
											</div>
										</div>
									</div>

										<div class="flex-even">
											<div>
												<!-- System Info -->
												<div class="w-100 mb-3">
													<mat-card class="p-4">
														<h5 class="mb-0 font-weight-medium">
															System Info
														</h5>

														<hr>

														<div class="d-flex">
															<!-- Connection -->
															<div class="flex-even">
																<span class="sm-text">Connection Status</span>
																<ng-container *ngIf="apps && apps.server; else netstatus_v1">
																	<h5 *ngIf="internet_connection.status && pi_status;else offline_net;" 
 																	[ngClass]="internet_connection.status == 'Good' ? 'good' : 'slow'">
 																		{{ internet_connection.status }}
																	</h5>
															
																	<ng-template #offline_net>
																		<h5 *ngIf="license_data.internetSpeed" class="bad">Offline</h5>
																	</ng-template>
																</ng-container>

																<ng-template #netstatus_v1>
																	<h5 [ngClass]="license_data.internetSpeed == 'Good' ? 'good' : 'slow'">
																		{{ license_data.internetSpeed }}
																	</h5>
																</ng-template>
															</div>

														<!-- Connection Type -->
														<div class="flex-even connection-type">
															<span class="sm-text">Connection Type</span>
															<h5>{{ license_data.internetType ? license_data.internetType : 'N/A' }}</h5>
														</div>

														<!-- Memory -->
														<div class="flex-even memory">
															<span class="sm-text">RAM/Memory</span>
															<h5>{{ license_data.memory ? license_data.memory : 'N/A' }}</h5>
														</div>
													</div>
													<!-- ID -->
													
													<hr class="my-3">

													<div class="align-items-center">
														<div class="last-speedtest-date mb-3">
															<span class="sm-text">Last Speedtest</span>
															<div>
																<h5 class="d-inline-block mr-4">{{ internet_connection.date ? internet_connection.date : 'N/A' }}</h5>

																<ng-container *ngIf="!speedtest_running; else disable_speedtest_btn">
																	<button *ngIf="license_data.speedtestSettings == 1" class="card-button" (click)="internetSpeedTest()" title="Test Internet Speed">
																		<span class="fas fa-sync md-text"></span>
																	</button>
																</ng-container>

																<ng-template #disable_speedtest_btn>
																	<button class="card-button disabled rotate mr-2" title="Speedtest Running">
																		<span class="fas fa-sync md-text"></span>
																	</button>

																	<span class="sm-text text-gray">
																		Speed Test Running
																	</span>
																</ng-template>
															</div>
														</div>

														<div class="d-flex">
															<!-- Download Speed -->
															<div class="flex-even storage">
																<span class="sm-text">Download Speed</span>
																<h5>{{ internet_connection.downloadMbps }}</h5>
															</div>

															<!-- Upload Speed -->
															<div class="flex-even storage">
																<span class="sm-text">Upload Speed</span>
																<h5>{{ internet_connection.uploadMbps }}</h5>
															</div>

															<!-- Average Latency -->
															<div class="flex-even ping">
																<span class="sm-text">Average Latency</span>
																<h5>{{ internet_connection.ping }}</h5>
															</div>
														</div>
													</div>

													<hr class="my-3">

													<div class="d-flex">
														<!-- Storage -->
														<div class="flex-even storage">
															<span class="sm-text">Storage</span>
															<h5>{{ storage_capacity ? storage_capacity : 'N/A' }}</h5>
														</div>

														<!-- Pi Version -->
														<div class="flex-even storage">
															<span class="sm-text">Pi Version</span>
															<h5>{{ apps && apps.rpi_model ? apps.rpi_model : 'N/A' }}</h5>
														</div>

														<!-- Player Version -->
														<div class="flex-even player-version">
															<span class="sm-text">Player Version</span>
															<h5>{{ apps && apps.server ? "Version 2" : "Version 1" }}</h5>
														</div>
													</div>

													<hr class="my-3">

													<div class="d-flex">
														<!-- Player Server -->
														<div class="flex-even player-server-version">
															<span class="sm-text">Server Version</span>
															<h5>{{ apps && apps.server ? apps.server : 'N/A' }}</h5>
														</div>

														<!-- Player UI -->
														<div class="flex-even ui-version">
															<span class="sm-text">UI Version</span>
															<h5>{{ apps && apps.ui ? apps.ui :'N/A' }}</h5>
														</div>

														<!-- Player Electron -->
														<!-- <div class="flex-even electron-version">
															<span class="sm-text">Electron Player Version</span>
															<h5>{{ apps && apps.electron ? apps.electron : 'N/A' }}</h5>
														</div> -->

														<!-- Player UI -->
														<div class="flex-even chromium-version">
															<span class="sm-text">Chromium Version</span>
															<h5>{{ apps && apps.chromium ? apps.chromium : 'N/A' }}</h5>
														</div>
													</div>
												</mat-card>
											</div>

											<!-- Screen Info -->
											<div class="w-100">
												<mat-card class="p-4">
													<h5 class="mb-0 font-weight-medium">
														Screen Info
													</h5>
	
													<hr>
	
													<div class="d-flex">
														<!-- Screen Name -->
														<div class="flex-even">
															<span class="sm-text">Screen Name</span>
															<a [routerLink]="screen_route"><h5 class="hoverable">{{ screen.screen_title ? (screen.screen_title | titlecase) : 'N/A' }}</h5></a>
														</div>

														<div class="flex-even">
															<span class="sm-text">Screen Template</span>
															<h5>{{ screen.assigned_template ? screen.assigned_template : 'N/A' }}</h5>
														</div>
	
														<div class="flex-even" *ngIf="screen_type">
															<span class="sm-text">Screen Type</span>
															<h5>{{ screen_type.name ? (screen_type.name | titlecase) : 'N/A'}}</h5>
														</div>
													</div>
													
													<hr class="my-3">
	
													<!-- Screen Playlists -->
													<div>
														<span class="sm-text">Screen Playlists</span>
														<div>
															<ul class="m-0 p-0 list-unstyled">
																<li *ngFor="let zone of zone_playlists">
																	<span class="fas fa-circle mr-2 align-middle d-inline-block" style="font-size: 6px;"></span>

																	<ng-container *ngIf="zone.link !== '/administrator/playlists/null'; else no_url">
																		<a [routerLink]="zone.link">
																			<h5 class="hoverable d-inline-block align-middle md-text m-0">{{ zone.name }} - {{ zone.playlist_name }}</h5>
																		</a>
																	</ng-container>

																	<ng-template #no_url>
																		<h5 class="d-inline-block align-middle md-text m-0">
																			{{ zone.name }} - No Playlist
																		</h5>
																	</ng-template>
																</li>
															</ul>
														</div>
													</div>
												</mat-card>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</mat-tab>

				<!-- Content Tab -->
				<mat-tab label="Content">
					<div class="content-tab-container" *ngIf="screen else no_screen">

						<div class="container-fluid">
							<div class="row">
								<!-- Playlist Info -->
								<div class="col-lg-3">
									<div class="playlist-details">
										<div><h2>{{ current_zone_name_selected }} Section</h2></div>
										<div class="row">
											<div class="col-lg-10">
												<a class="playlist-name" [routerLink]="playlist_route">{{ screen_zone.playlistName }}</a>
											</div>
										</div>
										<div class="description">
											<!-- <span class="sm-text" *ngIf="has_playlist; else no_playlist">
												This playlist has <strong>{{ number_of_contents }}</strong> items on <strong>{{ screen_zone.zone ? screen_zone.zone : content_per_zone[0].zone_name }}</strong> zone.<br>
												Total playtime of <b>{{ duration_breakdown_text.total }}</b>.
											</span> -->
										</div>
										<br>
										<div>
											<span class="sm-text"><b>Duration Breakdown</b></span>
										</div>
										<!-- <div class="total-duration">
											<span class="sm-text">Total {{ current_zone_selected }}: {{ duration_breakdown_text.total }}</span>
										</div> -->
										<div class="hosts-duration">
											<span class="sm-text">Hosts: {{ duration_breakdown_text.hosts }}</span>
										</div>
										<div class="advertisers-duration">
											<span class="sm-text">Advertisers: {{ duration_breakdown_text.advertisers }}</span>
										</div>
										<div class="fillers-duration">
											<span class="sm-text">Filler: {{ duration_breakdown_text.fillers }}</span>
										</div>
										<div class="feeds-duration">
											<span class="sm-text">Feeds: {{ duration_breakdown_text.feeds }}</span>
										</div>
										<div class="others-duration">
											<span class="sm-text">Other: {{ duration_breakdown_text.others }}</span>
										</div>
										<ng-template #no_playlist>
											<span class="sm-text">No playlist for this zone</span>
										</ng-template>
									</div>
								</div>
		
								<!-- Minimap -->
								<div class="col-lg-3">
									<div class="minimap">
										<app-template-minimap
											*ngIf="template_data else loader"
											[larger]="false"
											[zone_focus]="'main'"
											[is_text_displayed]="true"
											[is_interactive]="true"
											[template_data]="template_data"
											[height]="'180px'"
											[width]="minimap_width">
										</app-template-minimap>
			
										<!-- Background Section Toggle -->
										<div class="toggle-background-zone" *ngIf="has_background_zone">
											<mat-slide-toggle 
											[checked]="background_zone_selected"
											(click)="onSelectBackgroundZone($event)">Select Background Section</mat-slide-toggle>
										</div>
									</div>
								</div>
	
								<!-- Assets Breakdown -->
								<div class="col-lg-3">
									<div class="assets-chart-container">
										<canvas id="assetsBreakdown" height="250"></canvas>
									</div>
								</div>

								<!-- Duration Breakdown -->
								<div class="col-lg-3">
									<div class="duration-chart-container">
										<canvas id="durationBreakdown" height="250"></canvas>
									</div>
								</div>
	
							</div>
						</div>
	
						<br>
	
						<div class="row no-gutters">
							<div class="col-lg-2">
								<div class="content-search">
									<mat-form-field class="full-width">
										<mat-label>Content Search</mat-label>
										<input matInput type="text" [formControl]="content_search_control">
									</mat-form-field>
								</div>
							</div>
						</div>

						<!-- Media Viewer -->
						<div class="row no-gutters" *ngIf="has_playlist">
							<div class="col-md-1" *ngFor="let a of content_per_zone[selected_zone_index].contents; let i = index">
								<div class="mr-2">
									<app-thumbnail-card
										(click)="onOpenMediaViewer(content_per_zone[selected_zone_index].contents, i)"
										[file_url]="a.file_url"
										[image_uri]="a.file_type !== 'feed' ?  a.thumbnail : a.thumbnail+a.file_url"
										[filename]="a.file_type !== 'feed' ? a.file_name : a.title"
										[content_id]="a.content_id"
										[filetype]="a.file_type"
										[is_converted]="a.is_converted"
										[uuid]="a.uuid"
										[zone_content]="true"
										[is_fullscreen]="a.is_fullscreen"
										[disconnect_to_socket]="thumb_no_socket"
										[sequence]="i + 1">
									</app-thumbnail-card>
								</div>
							</div>
						</div>
					</div>
				</mat-tab>
			
				<!-- Analytics Tab -->
				<mat-tab label="Analytics">
					<div class="analytics-tab-container" *ngIf="screen else no_screen">
						<div class="row mt-4 align-items-center">
							<div class="col-lg-4">
								<h2>{{ queried_date }}</h2>
							</div>
							<div class="col-lg-8 text-right">
								<mat-form-field class="mr-3" appearance="fill">
									<mat-label>Select Display Mode</mat-label>
									<mat-select [(value)]="selected_display_mode" (selectionChange)="displayModeSelected($event.value)">
										<mat-option *ngFor="let mode of display_mode" [value]="mode.value">
											{{mode.viewValue}}
										</mat-option>
									</mat-select>
								</mat-form-field>
	
								<mat-form-field class="mr-3" appearance="fill" *ngIf="selected_display_mode == 'monthly'">
									<mat-label>Select Month</mat-label>
									<mat-select [(value)]="selected_month" (selectionChange)="monthSelected($event.value)">
										<mat-option *ngFor="let month of months" [value]="month.value">
											{{month.viewValue}}
										</mat-option>
									</mat-select>
								</mat-form-field>
	
								<mat-form-field appearance="fill" *ngIf="selected_display_mode == 'daily'">
									<mat-label>Choose a date</mat-label>
									<input matInput (dateInput)="onDateChange($event.value)" [matDatepicker]="picker" [(value)]="queried_date" readonly>
									<mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
									<mat-datepicker #picker></mat-datepicker>
								</mat-form-field>
							</div>
						</div>
						
						<!-- Monthly -->
						<ng-container *ngIf="selected_display_mode == 'monthly'">
							<div class="row" *ngIf="!monthly_chart_updating; else loader">
								<ng-container *ngIf="monthly_content_count.length > 0; else no_data">
									<div class="col-lg-4 mb-4" *ngFor="let cc of monthly_content_count">
										<mat-card  style="height: 375px">
											<div class="d-flex align-items-center">
												<div class="chart-thumbnail mr-3">
													<img [src]="cc.fileType !== 'webm' ? cc.thumbnail : cc.url + cc.fileName.substr(0, cc.fileName.lastIndexOf('.') + 1) + 'jpg'" alt="content-thumbnail">
												</div>
												<div>
													<a [routerLink]="['/administrator/media-library/', cc.contentId]" target="_blank">
														<h5 *ngIf="cc.fileType != 'feed'; else is_feed" [title]="cc.fileName | nohandle">{{ (cc.fileName | nohandle) | substring:20 }}</h5>
	
														<ng-template #is_feed>
															<h5>{{ cc.title }}</h5>
														</ng-template>
													</a>
													<p class="sm-text mb-0">Uploaded {{ cc.dateCreated | date }}</p>
												</div>
											</div>

											<app-data-graph 
												*ngIf="!destroy_monthly_charts"
												[analytics_reload]="analytics_reload.asObservable()"
												[data_set]="cc.contentPlaysListCount"
												[graph_id]="cc.contentId + '_monthly'"
												[realtime_data_per_license]="realtime_data"
												[date_format]="selected_display_mode"
												[date_queried]="queried_date"
												[page]="'single-license'">
											</app-data-graph>
										</mat-card>
									</div>
								</ng-container>
							</div>
						</ng-container>
	
						<!-- Yearly -->
						<ng-container *ngIf="selected_display_mode == 'yearly'">
							<div class="row" *ngIf="!yearly_chart_updating; else loader">
								<ng-container *ngIf="yearly_content_count.length > 0; else no_data">
									<div class="col-lg-4 mb-4" *ngFor="let cc of yearly_content_count">
										<mat-card  style="height: 375px">
											<div class="d-flex align-items-center">
												<div class="chart-thumbnail mr-3">
													<img [src]="cc.fileType !== 'webm' ? cc.thumbnail : cc.url + cc.fileName.substr(0, cc.fileName.lastIndexOf('.') + 1) + 'jpg'" alt="content-thumbnail">
												</div>
												<div>
													<a [routerLink]="['/administrator/media-library/', cc.contentId]" target="_blank">
														<h5 *ngIf="cc.fileType != 'feed'; else is_feed_y">
															{{ cc.fileName | filename }}
														</h5>

														<ng-template #is_feed_y>
															<h5>
																{{ cc.title }}
															</h5>
														</ng-template>
													</a>
													<p class="sm-text mb-0">Uploaded {{ cc.dateCreated | date }}</p>
												</div>
											</div>

											<app-data-graph
												[analytics_reload]="analytics_reload.asObservable()"
												[data_set]="cc.contentPlaysListCount"
												[graph_id]="cc.contentId + '_yearly'"
												[realtime_data_per_license]="realtime_data"
												[date_format]="selected_display_mode"
												[date_queried]="queried_date"
												[page]="'single-license'">
											</app-data-graph>
										</mat-card>
									</div>
								</ng-container>
							</div>
						</ng-container>
	
						<!-- Daily -->
						<ng-container *ngIf="selected_display_mode == 'daily'">
							<div class="row" *ngIf="!daily_chart_updating; else loader">
								<ng-container *ngIf="daily_content_count.length > 0; else no_data">
									<div class="col-lg-4 mb-4" *ngFor="let cc of daily_content_count">
										<mat-card  style="height: 375px">
											<div class="d-flex align-items-center" >
												<div class="chart-thumbnail mr-3">
													<img [src]="cc.fileType !== 'webm' ? cc.thumbnail : cc.url + cc.fileName.substr(0, cc.fileName.lastIndexOf('.') + 1) + 'jpg'" alt="content-thumbnail">
												</div>
												<div>
													<a [routerLink]="['/administrator/media-library/', cc.contentId]" target="_blank">
														<h5 *ngIf="cc.fileType != 'feed'; else is_feed_d">
															{{ cc.fileName | filename }}
														</h5>
	
														<ng-template #is_feed_d>
															<h5>
																{{ cc.title }}
															</h5>
														</ng-template>
													</a>
													<p class="sm-text mb-0">Uploaded {{ cc.dateCreated | date }}</p>
												</div>
											</div>

											<app-data-graph
												*ngIf="!destroy_daily_charts"
												[analytics_reload]="analytics_reload.asObservable()"
												[data_set]="cc.contentPlaysListCount"
												[graph_id]="cc.contentId + '_daily'"
												[realtime_data_per_license]="realtime_data"
												[date_format]="selected_display_mode"
												[date_queried]="queried_date"
												[page]="'single-license'">
											</app-data-graph>
										</mat-card>
									</div>
								</ng-container>
							</div>
						</ng-container>
					</div>
				</mat-tab>

				<!-- Terminal Tab -->
				<mat-tab label="Terminal" *ngIf="is_admin">
					<div class="terminal-area mt-4">
						<div class="row">
							<div class="col-lg-7">
								<h3>Remote Terminal</h3>
								<p class="sm-text mb-3">Write a short script and send it to the player to run.</p>
								<div class="terminal">
									<div class="entered-scripts">
										<div *ngFor="let s of terminal_entered_scripts">
											<p class="sm-text text-primary">> {{ s }}</p>
										</div>
									</div>

									<div class="d-flex">
										<input [(ngModel)]="terminal_value" placeholder="Enter Command" class="terminal-text-entry mb-3 flex-even" />
										<button (click)="submitTerminalCommand()" class="terminal-submit-button" [disabled]="terminal_value === undefined || terminal_value === ''">
											Run <span class="fas fa-play sm-text ml-2"></span>
										</button>
									</div>
								</div>
							</div>
							
							<div class="col-lg-5">

							</div>
						</div>
					</div>
				</mat-tab>

				<!-- Activity Tab -->
				<mat-tab label="Activity" *ngIf="is_admin">
					<ng-container *ngIf="activities">
						<div class="row mt-4">
							<div class="col-lg-4">
								<mat-card class="p-3 mb-3" *ngFor="let a of activities">
									<h4>{{ a.activityDescription }}</h4>
									<p class="sm-text">Initiated by {{ a.initiatedBy }} on {{ a.dateCreated | date: 'MMM dd, y hh:mm a' }}</p>
								</mat-card>
							</div>
						</div>
					</ng-container>
				</mat-tab>

				<!-- Settings Tab -->
				<mat-tab label="Settings" *ngIf="is_admin && license_data">
					<div class="row mt-4">
						<div class="col-lg-4">
							<mat-card class="p-4 mb-3">
								<div class="d-flex align-items-center">
									<div class="flex-even">
										<h4>Enable Scheduled Screenshot</h4>
										<p class="sm-text mb-0">
											For players with limited internet data, Disabling this feature is recommended. Manual screenshot will still be available of use.
										</p>
									</div>
									<div class="ml-5 text-right">
										<mat-slide-toggle 
										(change)="disableScreenshot($event)"
										[checked]="license_data.screenshotSettings == 1 ? true : false">
										</mat-slide-toggle>
									</div>
								</div>
							</mat-card>
		
							<mat-card class="p-4 mb-3">
								<div class="d-flex align-items-center">
									<div class="flex-even">
										<h4>Enable Speedtest</h4>
										<p class="sm-text mb-0">
											Internet Speedtest uses almost 200MB of internet data. For players with limited internet data, disabling this feature is recommended.
										</p>
									</div>
									<div class="ml-5 text-right">
										<mat-slide-toggle 
										(change)="disableSpeedtest($event)"
										[checked]="license_data.speedtestSettings == 1 ? true : false">
										</mat-slide-toggle>
									</div>
								</div>
							</mat-card>
						</div>
					</div>
				</mat-tab>

				<!-- Resource Tab -->
				<!-- <mat-tab label="Resource Usage" *ngIf="is_admin">
					<div class="row mt-4">	
						<div class="col-lg-12">
							<h2>Resource Usage</h2>
							<p class="sm-text">CPU and RAM Average usage of the Player</p>
						</div>
					</div>
					<app-data-graph
					[analytics_reload]="analytics_reload.asObservable()"
					[data_set]="cc.contentPlaysListCount"
					[graph_id]="cc.contentId + '_yearly'"
					[realtime_data_per_license]="realtime_data"
					[date_format]="selected_display_mode"
					[date_queried]="queried_date"
					[page]="'single-license'">
					</app-data-graph>
				</mat-tab> -->
            </mat-tab-group>
        </div>
    </div>

    <ng-template #loader>
        <div class="loader text-center py-5 d-flex align-items-center vh-50">
            <div class="w-100">
                <mat-spinner></mat-spinner>
                <h3 class="mt-4 mb-2">Please Wait</h3>
                <p class="sm-text">Getting content logs from database. This might take a while.</p>
            </div>
        </div>
	</ng-template>

	<ng-template #loading>
		<div class="loader text-center py-5 d-flex align-items-center vh-50" *ngIf="!no_screen_assigned else no_screen">
            <div class="w-100">
                <mat-spinner></mat-spinner>
                <h3 class="mt-4 mb-2">Please Wait</h3>
            </div>
        </div>
	</ng-template>
	
    <ng-template #no_data>
        <div class="col-lg-12 text-center">
            <div class="loader text-center py-5 d-flex align-items-center vh-50">
                <div class="w-100">
                    <h3 class="mt-4 mb-2">No Data Found</h3>
                    <p class="sm-text">There are no recorded plays of content during this date.</p>
                </div>
            </div>
        </div>
    </ng-template>

    <ng-template #no_zone>
        <div class="col-lg-12 text-center">
            <div class="loader text-center py-5 d-flex align-items-center vh-50">
                <div class="w-100">
                    <h3 class="mt-4 mb-2">No Data Found</h3>
                    <p class="sm-text">Assign a screen first, to see its contents.</p>
                </div>
            </div>
        </div>
	</ng-template>

	<ng-template #no_screen>
		<div class="no-screen vh-50 row align-items-center justify-content-center">
			<div class="col-lg-12 text-center">
				<span class="fa fa-tv"></span>
				<br>
				<div class="captions mt-3">No Screen Assigned</div>
			</div>
		</div>
	</ng-template>
</div>
