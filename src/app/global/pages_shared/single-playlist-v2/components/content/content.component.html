<div
	*ngIf="content"
	class="playlistv2-content box-shadow"
	(mouseenter)="setHoveredBaseFrequency(content)"
	(mouseleave)="unsetHoveredBaseFrequency()"
	[ngClass]="{
		'swap-width': swapping,
		'grid-dimension': !detailed_view_mode,
		'inactive-schedule': content.scheduleStatus === 'inactive',
		'future-schedule': content.scheduleStatus === 'future'
	}">
	<ng-container *ngIf="!detailed_view_mode; else detailed_view">
		<section
			class="playlistv2-content__header d-flex align-items-center px-2"
			[matTooltip]="content.fileName || content.title | nohandle"
			[class.inactive-schedule]="content.scheduleStatus === 'inactive'"
			[class.future-schedule]="content.scheduleStatus === 'future'"
			[class.frequency-hover]="canSetFrequencyBorder">
			<div class="content-filename-wrapper flex-even">
				<span
					class="xsm-text text-primary fas mr-1"
					[ngClass]="{
						'fa-image': content.fileType | isimage,
						'fa-video': content.fileType | isvideo,
						'fa-rss': content.fileType | isFeed
					}">
				</span>

				<span class="font-weight-bold text-primary xsm-text">{{ content.fileName || content.title | nohandle | slice : 0 : 8 }}</span>
			</div>

			<div class="checkbox-selector pt-1" *ngIf="selectable">
				<input
					type="checkbox"
					[(ngModel)]="selected"
					[ngModelOptions]="{ standalone: true }"
					[checked]="selected"
					(change)="content_selected.emit($event)" />
			</div>
		</section>

		<section class="playlistv2-content__thumbnail" [ngClass]="!controls && 'no-controls'" [matTooltip]="getFrequencyInfo()">
			<img class="image-w-100" [src]="content.thumbnail | sanitize" [alt]="content.fileName || content.title" />
		</section>

		<section class="playlistv2-content__controls d-flex align-items-center p-1 px-2 bg-white" *ngIf="controls">
			<div class="index flex-even">
				<span class="index-font mr-2">{{ index }}</span>
			</div>

			<div class="playlist-content-controls">
				<ng-container *ngFor="let c of playlistContentControls; let i = index">
					<button
						*ngIf="enabled_controls.includes(c.action)"
						class="naked-btn"
						[disabled]="c.disabled"
						[ngClass]="i < playlistContentControls.length - 1 && 'mr-15'"
						[matTooltip]="c.label"
						(click)="control_click.emit({ playlistContent: content, action: c.action })">
						<span class="xsm-text">
							<i class="{{ c.icon }}" [ngClass]="c.action == 'fullscreen' && content.isFullScreen == 1 ? 'text-green-2' : c.colorClass">
							</i>
						</span>
					</button>
				</ng-container>
			</div>
		</section>
	</ng-container>

	<ng-template #detailed_view>
		<div class="playlistv2__content-list">
			<div class="playlistv2__content-list-thumbnail border-right">
				<img class="image-w-100" [src]="content.thumbnail | sanitize" [alt]="content.fileName || content.title" />
			</div>
			<div
				class="playlistv2__content-list-details"
				[class.inactive-schedule]="content.scheduleStatus === 'inactive'"
				[class.future-schedule]="content.scheduleStatus === 'future'">
				<div class="upper__details mb-3">
					<div class="upper__details-text">
						<span class="upper__details-title">{{ content.fileName || content.title | nohandle | slice : 0 : 40 }}</span>
						<span class="upper__details-date">Uploaded {{ content.dateCreated | date : 'mediumDate' }}</span>
					</div>

					<div class="checkbox-selector pt-1">
						<input type="checkbox" (change)="content_selected.emit()" />
					</div>
				</div>

				<div class="middle__details mb-2">
					<div class="d-flex playlist-content-schedule">
						<div class="playlist-content-schedule__date-range flex-even" *ngIf="content.from && content.to">
							<p class="xsm-text">
								<span class="fas fa-calendar mr-2"></span>
								<br />
								{{
									content.from && content.to
										? (content.from | date : 'shortDate') + ' to ' + (content.to | date : 'shortDate')
										: '--'
								}}
							</p>
						</div>
						<div class="playlist-content-schedule__days mr-3 flex-even" *ngIf="content.days">
							<p class="xsm-text">
								<span class="fas fa-calendar-check mr-2"></span>
								<br />
								{{ content.days ? convertDayFormat(content.days) : '--' }}
							</p>
						</div>
						<div class="playlist-content-schedule__time-range flex-even" *ngIf="content.playTimeStart && content.playTimeEnd">
							<p class="xsm-text">
								<span class="fas fa-clock mr-2"></span>
								<br />
								{{ getPlayTimesText() }}
							</p>
						</div>
					</div>
				</div>

				<div class="lower__details">
					<div class="lower__details-left">
						<div class="text-details">
							<span
								class="md-text text-primary fas mr-1"
								[ngClass]="{
									'fa-image': content.fileType | isimage,
									'fa-video': content.fileType | isvideo,
									'fa-rss': content.fileType | isFeed
								}">
							</span>

							<span *ngIf="content.fileType | isimage">image</span>
							<span *ngIf="content.fileType | isvideo">video</span>
							<span *ngIf="content.fileType | isFeed">feed</span>
						</div>

						<div class="time-details">
							<span class="md-text"><i class="fas fa-clock"></i> {{ content.duration || 0 }}s</span>
						</div>
					</div>

					<div class="playlist-content-controls">
						<ng-container *ngFor="let c of playlistContentControls; let i = index">
							<button
								*ngIf="enabled_controls.includes(c.action)"
								class="naked-btn text-center"
								[ngClass]="i < playlistContentControls.length - 1 && 'mr-3'"
								[matTooltip]="c.label"
								(click)="control_click.emit({ playlistContent: content, action: c.action })">
								<span class="md-text">
									<i
										class="{{ c.icon }}"
										[ngClass]="c.action == 'fullscreen' && content.isFullScreen == 1 ? 'text-primary' : c.colorClass">
									</i>
								</span>
							</button>
						</ng-container>
					</div>
				</div>
			</div>
		</div>
	</ng-template>

	<div class="saving-overlay" *ngIf="saving">
		<div class="loader-wrapper">
			<app-spinner [diameter]="30"></app-spinner>
			<h5 class="mt-2">
				<strong>Saving...</strong>
			</h5>
		</div>
	</div>
</div>
