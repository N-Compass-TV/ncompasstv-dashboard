<div class="playlist-media bg-white">
	<div class="d-flex align-items-center">
		<div class="flex-even mr-5">
			<h3 class="mb-0">
				{{ type === 'add' ? 'Media Library' : 'Swap Content' }}
			</h3>

			<p class="sm-text">
				<ng-container *ngIf="type === 'add'; else swap_content_sub_heading;">
					Click a single or multiple content you wish to add to your playlist. New playlist content are added at the beginning.
				</ng-container>

				<ng-template #swap_content_sub_heading>
					Select a content you want to swap
				</ng-template>
			</p>

		</div>

		<div>
			<button class="naked-btn" mat-dialog-close>
				<span class="fas fa-times"></span>
			</button>
		</div>
	</div>

	<hr class="my-3">

	<div class="row" *ngIf="media_files">
		<div class="col-lg-7">
			<mat-form-field class="full-width position-relative" appearance="fill">
				<mat-label>Search a Filename or a Feed Title</mat-label>
				<input matInput type="text" 
				placeholder="Search a File"
				(keyup)="searchContent($event)">
			</mat-form-field>
		</div>

		<div class="col-lg-5 pt-3" *ngIf="media_files && !isDealer">
			<div class="d-flex align-items-center">
				<div class="mr-2">
					<mat-slide-toggle
					(change)="displayFloating($event)">
					</mat-slide-toggle>
				</div>
				<div class="flex-even">
					<h6 class="sm-text">Display Floating Contents</h6>
					<p class="xsm-text">
						Display all content that are not assigned to any Dealer
					</p>
				</div>
			</div>
		</div>
	</div>
	
	<div class="playlist-media-panel border material-shadow bg-light p-2 mb-4">
		<ng-container *ngIf="media_files; else loading">
				<div *ngIf="!file_not_found; else not_found" class="h-100">
					<div class="row no-gutters" *ngIf="media_files.length > 0; else loading">
						<div class="col-lg-2" *ngFor="let content of media_files; let i = index">
							<div class="m-1 position-relative" [ngClass]="isMarked(content) ? 'marked' : null">
								<app-playlist-media-thumbnail
								[content]="content"
								(converted)="videoConverted($event)"
								(click)="(content.isConverted && content.fileType == 'webm') || (content.fileType != 'webm') ? addToMarked(content) : contentNotReady()">
								</app-playlist-media-thumbnail>
							</div>
						</div>
					</div>

					<div class="d-flex align-items-center w-100 mt-3" *ngIf="media_files.length > 0 && isGettingData">
						<div class="w-100">
							<app-spinner></app-spinner>
						</div>
					</div>
				</div>
		</ng-container>

		<ng-template #no_content>
			<div class="d-flex w-100 align-items-center loader-overlay h-100 text-center pt-5">
				<div class="flex-even">
					<h3>No Content</h3>
					<p class="sm-text mb-0">There are no content available for this Dealer.</p>
				</div>
			</div>
		</ng-template>

		<ng-template #not_found>
			<div class="loader-overlay h-100 text-center pt-5">
				<h3>Sorry</h3>
				<p>File not found, please try another keyword.</p>
			</div>
		</ng-template>

		<ng-template #loading>
			<div class="loader-overlay h-100">
				<app-spinner></app-spinner>
			</div>
		</ng-template>
	</div>

	<div class="d-flex align-items-center">

		<ng-container *ngIf="type === 'add'; else swap_content_controls;">
			<div class="flex-even">
				<button mat-button mat-raised-button class="theme-btn mr-2" (click)="deselectAll()" [disabled]="selected_contents.length == 0">
					Deselect All
					<span class="fas fa-minus-circle ml-2"></span>
				</button>
				
				<button mat-button mat-raised-button class="theme-btn mr-2" (click)="playWhere()" [disabled]="selected_contents.length == 0">
					Play Where
					<span class="fas fa-play ml-2"></span>
				</button>
			</div>
			<div class="flex-even text-center">
				<span class="sm-text" *ngIf="paging">
					Loaded {{ media_files.length }} of {{ paging.totalEntities }} Assets
				</span>
			</div>
			<div class="text-right">
				<button mat-button mat-raised-button class="theme-btn" [mat-dialog-close]="selected_contents" [disabled]="selected_contents.length == 0">
					Add to Playlist
					<span class="fas fa-plus ml-2"></span>
				</button>
			</div>
		</ng-container>

		<ng-template #swap_content_controls>
			<div class="flex-even text-center">
				<span class="sm-text" *ngIf="paging">Loaded {{ media_files.length }} of {{ paging.totalEntities }} Assets</span>
			</div>

			<div class="text-right">
				<button mat-button mat-raised-button class="theme-btn" [mat-dialog-close]="selected_contents" [disabled]="selected_contents.length === 0">
					Select
				</button>
			</div>
		</ng-template>
	</div>
</div>