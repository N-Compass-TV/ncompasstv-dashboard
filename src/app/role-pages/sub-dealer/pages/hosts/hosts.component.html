<div class="theme-container">
    <div class="content-section">
        <div class="row">
            <div class="col-lg-10">
                <div class="flex-even">
                    <h1 class="page-title">Hosts</h1>
                </div>
            </div>
            <div class="col-lg-2">
                <div class="flex-even text-right">
                    <button mat-button mat-raised-button class="theme-btn" 
						[routerLink]="['/sub-dealer/hosts/create-host']"
						[disabled]="is_view_only">
							<span class="button-label">Add Host Place</span>
							<span class="fas fa-map-marker ml-2 sm-text"></span>
                    </button>
                </div>
            </div>
        </div>
        <hr class="my-4">
        <div class="row">
            <div class="col-4 col-lg">
                <mat-card class="h-100">
                    <app-data-card-compare *ngIf="host_count; else small_loader"
                    [compare_basis]="host_count.basis"
                    [compare_basis_label]="host_count.basis_label"
                    [good_value]="host_count.good_value"
                    [good_value_label]="host_count.good_value_label"
                    [bad_value]="host_count.bad_value"
                    [bad_value_label]="host_count.bad_value_label">
                    </app-data-card-compare>
                </mat-card>
            </div>
            <div class="col-4 col-lg dealer-card">
                <mat-card class="h-100">
                    <app-data-card-count *ngIf="host_count; else small_loader"
                    [data_value]="host_count.new_this_week_value"
                    [data_label]="host_count.new_this_week_label"
                    [data_description]="host_count.new_this_week_description">
                    </app-data-card-count>
                </mat-card>
            </div>
            <div class="col-4 col-lg dealer-card">
                <mat-card class="h-100">
                    <app-data-card-count *ngIf="host_count; else small_loader"
                    [data_value]="host_count.new_last_week_value"
                    [data_label]="host_count.new_last_week_label"
                    [data_description]="host_count.new_last_week_description">
                    </app-data-card-count>
                </mat-card>
            </div>
        </div>
        <hr class="my-4">
        <div *ngIf="!initial_load; else loader">
            <div *ngIf="!no_host; else nodata">
                <div class="row">
                    <div class="col-lg-8"></div>
                    <div class="col-lg-4">
                        <app-search-field
                        *ngIf="!initial_load"
                        [form_title]="'Search Host Name, Address, City or Postal Code'"
                        [placeholder]="'Example: N-Compass'"
                        [data_reference]="host_data"
                        [primary_keyword]="'host_name'"
                        [secondary_keyword]="'host_name'"
                        (searched)="hostFilterData($event)"
                        [api_search]="true"
                        ></app-search-field>
                    </div>
                </div>
                <div class="row" *ngIf="!initial_load">
                    <div class="col-lg-12">
                        <ng-container *ngIf="!searching; else loader">
                            <mat-card *ngIf="host_filtered_data.length > 0; else no_data">
                                <app-data-table
                                [table_columns]="host_table_column"
                                [table_data]="host_filtered_data"
                                [new_table]="true"
                                [paging_details]="paging_data"
                                (page_triggered)="getHosts($event)">
                                </app-data-table>
                            </mat-card>
                        </ng-container>
                    </div>
                </div>
            </div>
        </div>
        
        <ng-template #no_data>
			<mat-card class="p-5">
				<h3>What the!?</h3>
				<p class="sm-text mb-3">
					There are no available hosts at the moment.
				</p>
				<button mat-button mat-raised-button class="theme-btn mr-2" 
					[routerLink]="['/sub-dealer/create-host']"
					[disabled]="is_view_only">Add Host Place <span class="fas fa-plus ml-2 sm-text"></span>
				</button>
			</mat-card>
        </ng-template>


        
        <ng-template #nodata>
            <div class="col-lg-12 pl-0 pr-0">
                <mat-card class="pt-5 pb-5 col-lg-12 text-center">
                    <div class="mb-4">
                        <i class="text-gray fa-5x far fa-file-alt"></i>
                    </div>
                    <h3 class="text-gray col-lg-12">No Results Found.</h3>
                    <span class="text-gray col-lg-12">Try adjusting your search to find what you're looking for.</span>
                </mat-card>
            </div>
        </ng-template>

		<ng-template #loader>
            <div class="py-4 white-bg h-500">
                <app-spinner [diameter]="60"></app-spinner>
            </div>
        </ng-template>
    
        <ng-template #small_loader>
            <div class="py-4 white-bg">
                <app-spinner [diameter]="60"></app-spinner>
            </div>
        </ng-template>
    </div>
</div>